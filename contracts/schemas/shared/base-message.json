{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://maliev.com/schemas/shared/base-message.json",
    "title": "Base Message",
    "description": "The base structure that all Maliev messaging contracts MUST adhere to.",
    "type": "object",
    "properties": {
        "messageId": {
            "type": "string",
            "format": "uuid",
            "description": "A unique identifier for the specific message instance."
        },
        "messageName": {
            "type": "string",
            "description": "The canonical, PascalCase name of the contract."
        },
        "messageType": {
            "type": "string",
            "enum": ["Command", "Event", "Request", "Response"],
            "description": "The type of contract."
        },
        "messageVersion": {
            "type": "string",
            "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
            "description": "The semantic version of the schema (MAJOR.MINOR)."
        },
        "publishedBy": {
            "type": "string",
            "description": "The service identifier of the publishing service."
        },
        "consumedBy": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "minItems": 1,
            "description": "An explicit array of service identifiers for the intended consumers."
        },
        "correlationId": {
            "type": "string",
            "format": "uuid",
            "description": "A GUID used to trace a flow or conversation across multiple messages."
        },
        "causationId": {
            "type": ["string", "null"],
            "format": "uuid",
            "description": "The messageId of the message that triggered this message, if applicable."
        },
        "occurredAtUtc": {
            "type": "string",
            "format": "date-time",
            "description": "The ISO-8601 timestamp of when the message was created."
        },
        "isPublic": {
            "type": "boolean",
            "description": "A flag indicating if the message is part of the public, cross-service contract surface."
        }
    },
    "required": [
        "messageId",
        "messageName",
        "messageType",
        "messageVersion",
        "publishedBy",
        "consumedBy",
        "correlationId",
        "occurredAtUtc",
        "isPublic"
    ]
}